<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>高卒求人票チェックリスト＆AI添削サポート</title>
  <style>
    body {
      font-family: "Noto Sans JP", sans-serif;
      background: #eef8ec;
      color: #222;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 32px auto 32px auto;
      padding: 32px 16px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 24px #0001;
    }
    h1 {
      font-size: 1.7rem;
      color: #207030;
      margin-bottom: 18px;
      letter-spacing: 2px;
    }
    .section {
      background: #ebfaed;
      border-radius: 14px;
      box-shadow: 0 2px 8px #20703010;
      padding: 30px 18px 18px 18px;
      margin-bottom: 38px;
    }
    .section-number {
      background: #92d050;
      color: #fff;
      border-radius: 50%;
      display: inline-block;
      width: 30px;
      height: 30px;
      font-size: 1.15rem;
      font-weight: bold;
      text-align: center;
      line-height: 32px;
      margin-right: 9px;
      vertical-align: middle;
    }
    .checklist-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 12px;
      background: #fcfff8;
    }
    .checklist-table th,
    .checklist-table td {
      border: 1px solid #92d05033;
      padding: 10px 7px;
      font-size: 0.98rem;
      vertical-align: top;
    }
    .checklist-table th {
      background: #defadc;
      font-weight: bold;
      color: #207030;
      width: 44px;
      text-align: center;
    }
    .checklist-table input[type="checkbox"] {
      width: 20px;
      height: 20px;
      accent-color: #92d050;
    }
    .checklist-table textarea {
      width: 98%;
      min-height: 32px;
      border-radius: 6px;
      border: 1px solid #b9ebc5;
      font-size: 1rem;
      padding: 4px 7px;
      resize: vertical;
      background: #f5fbe7;
    }
    .tensaku-examples {
      margin-bottom: 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
    }
    .example-box {
      background: #fff9f1;
      border-radius: 7px;
      padding: 8px 16px 8px 16px;
      font-size: 0.98rem;
      box-shadow: 0 1px 4px #ff98001a;
      min-width: 250px;
      flex: 1 1 260px;
    }
    .tensaku-form-flex {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
    }
    .tensaku-col {
      flex: 1 1 320px;
      min-width: 280px;
      max-width: 430px;
    }
    .tensaku-label {
      font-weight: bold;
      font-size: 1.05rem;
      margin-bottom: 5px;
      display: block;
    }
    .comment-input {
      width: 100%;
      border: 1px solid #aad892;
      border-radius: 8px;
      padding: 11px;
      font-size: 1.07rem;
      margin-bottom: 7px;
      resize: vertical;
      min-height: 60px;
      box-sizing: border-box;
      background: #f7fff8;
    }
    .btn-adv {
      padding: 10px 22px;
      background: #92d050;
      color: #fff;
      border: none;
      border-radius: 7px;
      font-size: 1.08rem;
      font-weight: bold;
      margin-top: 3px;
      cursor: pointer;
      box-shadow: 0 1px 3px #a7cfa03a;
      transition: background 0.17s;
    }
    .btn-adv:hover { background: #7bc142; }
    .tensaku-result-box {
      background: #e6f9ec;
      border-radius: 9px;
      min-height: 85px;
      padding: 15px 15px 10px 15px;
      margin-bottom: 8px;
      font-size: 1.07rem;
      box-shadow: 0 1px 4px #20703010;
      border: 1.3px solid #bde8cb;
    }
    .tensaku-advice-box {
      background: #e1f6eb;
      border-radius: 8px;
      padding: 13px 15px 11px 15px;
      margin-bottom: 6px;
      color: #287050;
      font-size: 1.00rem;
      min-height: 42px;
      border: 1.2px solid #bde8cb;
    }
    .char-count-box {
      font-size: 0.98rem;
      color: #56a364;
      margin-top: 0px;
      margin-bottom: 10px;
    }
    @media (max-width: 900px) {
      .container { max-width: 99vw; padding: 12px; }
      .section { padding: 18px 5px 12px 5px; }
    }
    @media (max-width: 700px) {
      .tensaku-form-flex { flex-direction: column; gap: 10px; }
      .tensaku-col { max-width: 99vw; }
      .checklist-table th, .checklist-table td { font-size: 0.96rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>高卒求人票チェックリスト & AI添削サポート</h1>
    <div class="section">
      <h2><span class="section-number">1</span>高卒求人票セルフチェックリスト</h2>
      <table class="checklist-table">
        <tr><th>#</th><th>チェック項目</th><th>チェック</th><th>コメント</th></tr>
        <tr><td>1</td><td>仕事内容が高校生向けに分かりやすく具体的に書かれている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>2</td><td>職場見学や体験実習についての案内が記載されている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>3</td><td>応募資格（高校新卒／普通科可など）が明確</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>4</td><td>勤務地や勤務時間、休日休暇が具体的に明記されている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>5</td><td>給与額（月給・時給など）がわかりやすく記載されている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>6</td><td>昇給・賞与・各種手当などの情報が明記されている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>7</td><td>社会保険や福利厚生（制服・寮・食事等）が記載されている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>8</td><td>正社員登用・長期雇用の可能性が分かる内容</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>9</td><td>就業場所・転勤有無・勤務先地図の記載がある</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>10</td><td>教育・研修体制（入社時研修、OJT等）に触れている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>11</td><td>職場の雰囲気や社内イベント（写真可）の説明</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>12</td><td>会社の特徴や社風、求める人物像が明記されている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>13</td><td>会社情報（設立・資本金・従業員数など）がある</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>14</td><td>応募方法・選考フローが記載されている</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>15</td><td>応募前職場見学の可否・日程調整の連絡方法</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>16</td><td>先輩社員の声や卒業生の活躍紹介がある</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>17</td><td>通勤手段（自転車・公共交通機関等）の記載</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>18</td><td>男女別の待遇・女性活躍推進・ダイバーシティ対応</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>19</td><td>オンライン説明会・配信案内などの取組み</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
        <tr><td>20</td><td>法令遵守や安全衛生（労基・同一労働同一賃金等）への配慮</td>
          <td><input type="checkbox"></td><td><textarea></textarea></td></tr>
      </table>
    </div>
    <div class="section">
      <h2><span class="section-number">2</span>AI文章添削</h2>
      <div class="tensaku-examples">
        <div class="example-box">
          <b>Before（例文1：販売）</b><br>
          店頭でのレジ業務、商品陳列、接客などをお願いします。
        </div>
        <div class="example-box">
          <b>Before（例文2：製造）</b><br>
          工場でパンの生地をライン作業で作成してもらいます。
        </div>
        <div class="example-box">
          <b>Before（例文3：特長）</b><br>
          特長 アットホームな雰囲気で安心して働けます
        </div>
      </div>
      <div class="tensaku-form-flex">
        <div class="tensaku-col">
          <label for="userBefore" class="tensaku-label">Before（御社の文面）</label>
          <textarea id="userBefore" class="comment-input" placeholder="例）特長 アットホームな雰囲気で安心して働けます" rows="5"></textarea>
          <div style="color:#7bc142;font-size:13px;margin-bottom:2px;">
            ※冒頭に「特長」「内容」「補足」「特記」のいずれかを入力してください。<br>
            例：特長 会社のPR文（90文字以内）<br>
            例：内容 仕事内容の説明（300文字以内）
          </div>
          <button class="btn-adv" onclick="doAITensaku()">AIで添削・自動補完</button>
        </div>
        <div class="tensaku-col">
          <label class="tensaku-label">After（AI添削結果・フィードバック）</label>
          <div id="aiAfter" class="tensaku-result-box" style="display:none"></div>
          <div id="advice-box" class="tensaku-advice-box" style="display:block">【アドバイス】<br>（AI実行後にここへ表示されます）</div>
          <div id="char-count" class="char-count-box"></div>
          <div id="loading" class="loading-typing" style="display:none;">添削中です<span class="loading-dot">...</span></div>
        </div>
      </div>
    </div>
  </div>

<script>
function doAITensaku() {
    const input = document.getElementById('userBefore').value.trim();
    const aiOut = document.getElementById('aiAfter');
    const adviceOut = document.getElementById('advice-box');
    const loading = document.getElementById('loading');
    aiOut.style.display = "none";
    adviceOut.style.display = "block";
    aiOut.innerText = "";
    adviceOut.innerText = "【アドバイス】<br>（AI実行後にここへ表示されます）";
    document.getElementById('char-count').innerText = "";
    if (!input) { return; }
    loading.style.display = "flex";
    // 最大文字数設定
    let maxLen = 300, type = "内容";
    if (input.startsWith('特長')) { maxLen = 90; type = "特長"; }
    else if (input.startsWith('内容')) { maxLen = 300; type = "内容"; }
    else if (input.startsWith('補足')) { maxLen = 300; type = "補足"; }
    else if (input.startsWith('特記')) { maxLen = 300; type = "特記"; }
    fetch('/tensaku', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text: input, maxLen: maxLen })
    })
    .then(response => response.json())
    .then(data => {
        loading.style.display = "none";
        aiOut.innerHTML = `<b>【AI添削結果】</b><br>${(data.result || '（添削結果なし）').replace(/\n/g, '<br>')}`;
        aiOut.style.display = "block";
        document.getElementById('char-count').innerHTML =
            `<b>（${type}）</b>　AI添削後：<b>${data.length}</b>文字 ／ 最大${maxLen}文字`;
        // 必ずアドバイス欄は表示・内容が"なし"の場合も「アドバイス：なし」と表示
        let adviceVal = (data.advice && data.advice !== "" && data.advice !== "(なし)" && data.advice !== "なし") ? data.advice : "なし";
        adviceOut.innerHTML = `<b>【アドバイス】</b><br>${(adviceVal || 'なし').replace(/\n/g, '<br>')}`;
        adviceOut.style.display = "block";
    })
    .catch(e => {
        loading.style.display = "none";
        aiOut.innerHTML = `<span style="color:#c33">AI連携エラー: ${e.message}</span>`;
        aiOut.style.display = "block";
        adviceOut.innerHTML = `<b>【アドバイス】</b><br>（AI通信エラー）`;
        adviceOut.style.display = "block";
    });
}
</script>
</body>
</html>
